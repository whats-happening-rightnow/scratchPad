using HtmlAgilityPack;
using System;
using System.Collections.Generic;
using System.IO;
using System.Linq;
using System.Net;
using System.Text;
using System.Threading.Tasks;

namespace jc_scratch_pad
{
    class Program
    {
        public static int ct { get; set; }
        static void Main(string[] args)
        {
            ct = 1;
            var getem = allem();
            foreach (var thisone in getem)
            {
                foreach (var qual in thisone.bzuf)
                {
                    if (thisone.success) continue;

                    if (File.Exists(qual.file)) {
                        wl($"yes|{qual.file}");
                        thisone.success = true;
                        thisone.gotfile = qual.file;
                    };

                    if (thisone.success) continue;

                    thisone.success = dlfile(new Uri(qual.url), qual.file);
                    thisone.gotfile = qual.file;
                    wl($"{(thisone.success ? "yes" : "fail")}|{thisone.gotfile}");
                }
            }
        }

        static bool dlfile(Uri url, string outputFilePath)
        {
            bool result = true;
            const int BUFFER_SIZE = 16 * 1024;
            using (var outputFileStream = File.Create(outputFilePath, BUFFER_SIZE))
            {
                var req = WebRequest.Create(url);
                req.Headers.Add("Cookie", "_ga=GA1.2.1777158500.1530120956; _gid=GA1.2.1924579933.1530120956; WEBZZ-16179-MTV=0; ats=eyJhIjo5NDk2LCJjIjo1MjU4OTA3MywibiI6MTQsInMiOjg2LCJlIjoxMjcwLCJwIjozfQ==; atsd=3466661d-c51b-4eb7-866f-72b7a2d785f5; atss=3466661d-c51b-4eb7-866f-72b7a2d785f5; etaguid=5d7ecd43-08bc-4e16-b63f-215b7d50ed97; PHPSESSID=c4q2b5c4gos03mkd6e0o8vhc81; RNLBSERVERID=ded3565; loginremember=Rw2uyrAii2ogOaq41%2FExvibeI70JEu%2FZjUnXONM6vcx8FQsGzzp7yav2KsDW0Mb6NsPNx4cDFXglRbHbGeltqEULSnTUfyAD0AYp; pp-sid=2oiFlaRFcqfmlck0qNV1xGosZWK1dx3wQ8eHW1ml; atstrackPiece1=eyJhZmZVcmwiOiJqdWdnY2FzaC5jb20iLCJhZmZDb2RlIjoiZXlKaElqbzVORGsyTENKaklqbzFNalU0T1RBM015d2liaUk2TVRRc0luTWlPamcyTENKbElqb3hNamN3TENKd0lqb3pmUT09IiwibmV0d29ya0NvZGUiOiJieiIsIlVJRCI6IjFlYWNmMGNhLTZkOGItNDE4YS05MWI1LTAxNzA0MjVlMTVmOSIsIlNVSUQiOiIzNDY2NjYxZC1jNTFiLTRlYjctODY2Zi03MmI3YTJkNzg1ZjUiLCJkaXNhYmxlIjpmYWxzZSwiZGF0YSI6eyJ2YWx1ZSI6MSwiYWIiOjAsInVzZXJBZ2VudCI6Ik1vemlsbGEvNS4wIChXaW5kb3dzIE5UIDEwLjA7IFdpbjY0OyB4NjQpIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIENocm9tZS82Ny4wLjMzOTYuOTkgU2FmYXJpLzUzNy4zNiIsInJlZmVycmFsRG9tYWluIjoiIiwicmVmZXJyYWxQYXRoIjoiIiwiYWRJZCI6MCwiZ2EiOnsidCI6IlVBLTE1NDU1OTIxLTMxIiwiYyI6IjE3NzcxNTg1MDAuMTUzMDEyMDk1NiJ9LCJ2b3J0ZXhHdWlkIjoiNWQ3ZWNkNDMtMDhiYy00ZTE2LWI2M2YtMjE1YjdkNTBlZDk3IiwicGFja2FnZUlkIjoiNjMyMyJ9LCJkZWZhdWx0Q29kZSI6ImV5SmhJam81TkRrMkxDSmpJam8wTkRVME16UTNNQ3dpYmlJNk1UUXNJbk1pT2pnMkxDSmxJam95TmpZc0luQWlPak45Iiwic3BsaXRBdGxhc0RhdGEiOnRydWUsInN0ZXBzIjoifDtkO2c7djt0O3U7fDthYzt0O3w7YWM7dDt8Iiwidm9ydGV4ZGF0YSI6eyJfc3NjcmVlbiI6IjEyODAgeCA3MjAiLCJf; atstrackPiece2=c2Jyb3dzZXIiOiJDaHJvbWUiLCJfc2Jyb3dzZXJWZXJzaW9uIjoiNjcuMC4zMzk2Ljk5IiwiX2Jtb2JpbGUiOmZhbHNlLCJfc29zIjoiV2luZG93cyBOVCA0LjAiLCJfc29zVmVyc2lvbiI6Ik5UIDQuMCIsIl9zZmxhc2hWZXJzaW9uIjoiLSIsIl9zbGFuZ3VhZ2VzIjoiZW4tVVMsZW4iLCJndWlkIjoiMDg5NDNlZDAtNmQ3NS00MjFiLWFhNzEtMjc4ZTEwY2Y1ZWRkIiwiaHdtb2RlbCI6IlVua25vd24iLCJod2ZhbWlseSI6IkVtdWxhdG9yIiwiZGV2dHlwZSI6IkRlc2t0b3AifSwidmlzaXRTdGFydCI6MTUzMDEyMDk1NTk2NywiY29kZVR5cGUiOiJhdHMifQ==");

                try
                {
                    using (var response = req.GetResponse())
                    {
                        using (var responseStream = response.GetResponseStream())
                        {
                            var buffer = new byte[BUFFER_SIZE];
                            int bytesRead;
                            do
                            {
                                bytesRead = responseStream.Read(buffer, 0, BUFFER_SIZE);
                                outputFileStream.Write(buffer, 0, bytesRead);
                            } while (bytesRead > 0);
                        }
                    }
                }
                catch (Exception ex)
                {
                    result = false;
                }
            }

            if (!result)
            {
                if (File.Exists(outputFilePath))
                {
                    File.Delete(outputFilePath);
                }
            }

            return result;
        }

        static List<allofem> allem()
        {
            var quals = new string[] {
                "mp4_1080_16000/",
                "mp4_1080_15000/",
                "mp4_1080_14000/",
                "mp4_1080_13000/",
                "mp4_1080_12000/",
                "mp4_1080_11000/",
                "mp4_1080_10000/",
                "mp4_1080_9000/",
                "mp4_1080_8000/",
                "mp4_720_12000/",
                "mp4_720_11000/",
                "mp4_720_10000/",
                "mp4_720_9000/",
                "mp4_720_8000/",
                "mp4_720_7000/",
                "mp4_720_6000/",
                "mp4_720_5000/",
                "mp4_720_4000/",
                "mp4_480_8000/",
                "mp4_480_7000/",
                "mp4_480_6000/",
                "mp4_480_5000/",
                "mp4_480_4000/",
                "mp4_480_3000/",
                "mp4_480_2000/",
                "mp4_480_1000/"
            };
            var ids = new string[] {
                "970",
                "988",
                "995",
                "998",
                "994",
                "999",
                "1002",
                "1003",
                "1868",
                "1952",
                "1966",
                "1984",
                "2075",
                "2099",
                "2148",
                "2163",
                "2190",
                "2208",
                "2237",
                "2252",
                "2261",
                "2268",
                "2330",
                "2331",
                "2341",
                "2347",
                "2393",
                "2417",
                "2413",
                "2442",
                "2444",
                "2434",
                "2473",
                "2490",
                "2533",
                "2526",
                "2597",
                "2486",
                "2606",
                "2613",
                "2627",
                "2638",
                "2663",
                "2675",
                "2677",
                "2695",
                "2709",
                "2718",
                "2735",
                "2751",
                "2759",
                "2779",
                "2777",
                "2787",
                "2809",
                "2796",
                "2797",
                "2806",
                "2815",
                "2832",
                "2827",
                "2842",
                "2855",
                "2863",
                "2874",
                "2878",
                "2905",
                "2914",
                "2926",
                "2935",
                "2945",
                "2960",
                "2969",
                "2994",
                "3012",
                "3025",
                "3035",
                "3050",
                "3060",
                "3093",
                "3104",
                "3135",
                "3148",
                "3157",
                "3166",
                "3175",
                "3186",
                "3202",
                "3206",
                "3228",
                "3252",
                "3240",
                "3267",
                "3280",
                "3312",
                "3342",
                "3347",
                "3345",
                "3369",
                "3378",
                "3387",
                "3423",
                "3435",
                "3440",
                "3327",
                "3469",
                "3483",
                "3500",
                "3514",
                "3532",
                "3552",
                "3562",
                "3576",
                "3600",
                "3615",
                "3631",
                "3644",
                "3686",
                "3698",
                "3713",
                "3767",
                "3745",
                "3779",
                "3830",
                "3873",
                "3850",
                "3775",
                "3942",
                "3895",
                "3911",
                "3956",
                "3971",
                "3964",
                "4025",
                "4039",
                "4037",
                "4051",
                "4066",
                "4092",
                "4125",
                "4140",
                "4169",
                "4198",
                "4171",
                "4249",
                "4267",
                "4282",
                "4284",
                "4295",
                "4325",
                "4338",
                "4389",
                "4402",
                "4457",
                "4479",
                "4438",
                "4513",
                "4514",
                "4470",
                "4538",
                "4557",
                "4555",
                "4583",
                "4575",
                "4606",
                "4648",
                "4635",
                "4679",
                "4676",
                "4729",
                "4724",
                "4773",
                "4791",
                "4727",
                "4823",
                "4787",
                "4810",
                "4842",
                "4862",
                "4877",
                "4831",
                "4922",
                "4900",
                "4942",
                "4951",
                "4947",
                "4975",
                "4980",
                "5009",
                "5037",
                "5073",
                "5087",
                "5112",
                "5128",
                "5130",
                "5140",
                "5166",
                "5126",
                "5192",
                "5212",
                "5216",
                "5218",
                "5239",
                "5282",
                "5254",
                "5267",
                "5280",
                "5324",
                "5332",
                "5358",
                "5365",
                "5364",
                "5400",
                "5379",
                "5392",
                "5395",
                "5464",
                "5458",
                "5473",
                "5490",
                "5524",
                "5547",
                "5441",
                "5584",
                "5595",
                "5629",
                "5635",
                "5650",
                "5678",
                "5692",
                "5712",
                "5728",
                "5737",
                "5754",
                "5761",
                "5785",
                "5810",
                "5813",
                "5844",
                "5843",
                "5862",
                "5857",
                "5877",
                "5899",
                "5924",
                "5933",
                "5918",
                "5958",
                "5988",
                "5989",
                "5993",
                "6000",
                "6076",
                "6154",
                "6160",
                "6175",
                "6231",
                "6264",
                "6275",
                "6324",
                "6344",
                "6377",
                "6396",
                "6411",
                "6419",
                "6452",
                "6476",
                "6538",
                "6579",
                "6600",
                "6601",
                "6628",
                "6629",
                "6643",
                "6660",
                "6672",
                "6693",
                "6697",
                "6733",
                "6736",
                "6756",
                "6784",
                "6809",
                "6832",
                "6859",
                "6876",
                "6890",
                "6913",
                "6920",
                "6924",
                "6956",
                "6955",
                "7058",
                "6991",
                "7047",
                "7103",
                "7104",
                "7063",
                "7197",
                "7251",
                "7235",
                "7242",
                "7234",
                "7290",
                "7328",
                "7296",
                "7368",
                "7371",
                "7376",
                "7386",
                "7413",
                "7414",
                "7428",
                "7435",
                "7444",
                "7458",
                "7455",
                "7452",
                "7471",
                "7517",
                "7521",
                "7523",
                "7544",
                "7500",
                "7605",
                "7604",
                "7631",
                "7650",
                "7683",
                "7687",
                "7243",
                "7700",
                "7718",
                "7726",
                "7738",
                "7748",
                "7719",
                "7737",
                "7795",
                "7808",
                "7809",
                "7846",
                "7847",
                "7812",
                "7767",
                "7900",
                "7902",
                "7763",
                "7897",
                "7967",
                "7973",
                "7974",
                "7997",
                "8045",
                "8044",
                "8065",
                "8098",
                "8093",
                "8110",
                "8050",
                "8112",
                "8137",
                "8145",
                "8168",
                "7986",
                "8210",
                "8216",
                "8217",
                "8224",
                "8683",
                "7972",
                "8237",
                "8225",
                "8246",
                "8245",
                "8317",
                "8333",
                "8330",
                "8345",
                "8368",
                "8375",
                "8369",
                "8376",
                "8381",
                "8367",
                "8389",
                "8458",
                "8471",
                "8472",
                "8500",
                "8498",
                "8538",
                "8536",
                "8529",
                "8621",
                "8574",
                "8598",
                "8573",
                "8641",
                "8678",
                "8611",
                "8693",
                "8713",
                "8606",
                "8755",
                "8741",
                "8778",
                "8793",
                "8792",
                "8824",
                "8868",
                "8813",
                "8815",
                "8630",
                "8936",
                "8870",
                "8423",
                "8595",
                "8894",
                "9013",
                "8830",
                "8895",
                "9072",
                "9044",
                "9033",
                "9070",
                "9146",
                "9134",
                "9147",
                "9203",
                "9196",
                "9269",
                "9339",
                "9103",
                "9379",
                "9334",
                "9281",
                "9412",
                "9416",
                "9445",
                "9397",
                "9273",
                "9453",
                "9448",
                "9484",
                "9514",
                "9380",
                "9496",
                "9485",
                "9497",
                "9572",
                "9576",
                "9454",
                "9558",
                "9606",
                "9559",
                "9605",
                "9639",
                "9600",
                "9707",
                "9684",
                "9695",
                "9706",
                "9803",
                "9789",
                "9788",
                "9790",
                "9746",
                "10059",
                "10108",
                "10043",
                "10100",
                "10106",
                "10099",
                "10171",
                "10178",
                "10057",
                "10190",
                "10156",
                "10157",
                "10274",
                "10287",
                "10246",
                "10233",
                "10352",
                "10302",
                "10319",
                "10368",
                "10351",
                "10366",
                "10367",
                "10488",
                "10421",
                "10426",
                "10528",
                "10529",
                "10540",
                "10562",
                "10610",
                "10611",
                "10490",
                "10601",
                "10604",
                "10539",
                "10590",
                "10678",
                "10605",
                "10642",
                "10656",
                "10677",
                "10679",
                "10740",
                "10392",
                "10739",
                "10711",
                "10821",
                "10824",
                "10769",
                "10738",
                "10712",
                "10905",
                "10867",
                "10946",
                "10977",
                "10980",
                "10975",
                "10992",
                "11040",
                "10974",
                "11011",
                "11029",
                "10985",
                "11088",
                "11028",
                "11062",
                "11101",
                "10887",
                "11063",
                "11146",
                "11136",
                "11077",
                "11169",
                "11215",
                "11187",
                "11276",
                "2365289",
                "2359073",
                "2349834",
                "2414030",
                "2409998",
                "2409997",
                "2443716",
                "2469570",
                "2412234",
                "2584414",
                "2412426",
                "2412227",
                "2461939",
                "2652842",
                "2636092",
                "2439732",
                "2638935",
                "2635921"
            };
            return ids.Select(x => new allofem {
                sid = x,
                success = false,
                bzuf = quals.Select(q => new bzurlfile {
                    url = $@"https://ma.brazzers.com/download/{x}/2/{q}",
                    file = $@"\\jfs\q$\zz-split\zzz\{x}_{q.Replace("/", "")}.mp4",
                }).ToList(),
                file = ""
            }).ToList();
        }

        static void wl(string msg) {
            Console.WriteLine($"{DateTime.Now.ToString("yyyy-MM-dd hh:mm:ss.f")}|{(ct++).ToString("00000")}|{msg}");
        }
    }

    class allofem
    {
        public string sid { get; set; }
        public bool success { get; set; }
        public string gotfile { get; set; }
        public List<bzurlfile> bzuf { get; set; }
        public string file { get; set; }
    }
    class bzurlfile {
        public string url { get; set; }
        public string file { get; set; }
    }
}
